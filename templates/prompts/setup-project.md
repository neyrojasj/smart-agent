# Setup Project Context

Execute this prompt to fully initialize or update the Planning Copilot context for this project.

## Instructions

Perform ALL of the following steps in order. Do not skip any steps.

---

## Step 1: Analyze Project Structure

Scan the entire project and identify:
- Root directory structure
- All programming languages used (by file extension and content)
- Package/dependency files (package.json, Cargo.toml, pyproject.toml, go.mod, etc.)
- Configuration files (.env.example, config files, etc.)
- Build/bundler configuration (webpack, vite, tsconfig, etc.)
- CI/CD configuration (.github/workflows, .gitlab-ci.yml, etc.)

---

## Step 2: Create/Update Project Summary

Create or update `.copilot/project_summary.md` with:

```markdown
# Project Summary

> Auto-generated by Planning Copilot. Updated after each completed plan.

## Project Identity

- **Name**: [from package.json, Cargo.toml, or directory name]
- **Description**: [from package.json description or README first paragraph]
- **Version**: [if available]
- **License**: [if available]

## Tech Stack

### Languages
| Language | Usage | Files |
|----------|-------|-------|
| [e.g., TypeScript] | [Primary/Secondary] | [count] |

### Frameworks & Libraries
| Name | Version | Purpose |
|------|---------|---------|
| [e.g., React] | [version] | [UI Framework] |

### Runtime & Tools
- **Runtime**: [Node.js v20, Python 3.11, Rust 1.75, etc.]
- **Package Manager**: [npm, yarn, pnpm, cargo, pip, poetry, etc.]
- **Build Tool**: [vite, webpack, cargo, etc.]
- **Bundler**: [if applicable]

## Project Structure

[Include actual directory tree, max 3 levels deep]

## Entry Points

| Entry Point | File | Purpose |
|-------------|------|---------|
| Main | [path] | [description] |
| CLI | [path] | [description] |
| API | [path] | [description] |

## Scripts/Commands

| Command | Description |
|---------|-------------|
| [npm run dev] | [Start development server] |
| [npm test] | [Run tests] |
| [npm run build] | [Build for production] |

## Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| [VAR_NAME] | [Yes/No] | [What it's for] |

## External Integrations

- [List any APIs, databases, services detected]

## Recent Changes

<!-- Auto-updated after each completed plan -->
| Date | Plan ID | Summary |
|------|---------|---------|
| [Initial setup] | - | Project context initialized |

---
*Last analyzed: [TIMESTAMP]*
*Files scanned: [COUNT]*
```

**Important**: This file will be automatically updated after each completed plan to reflect changes in project structure, dependencies, or configuration.

---

## Step 3: Create/Update Instructions

Create or update `.copilot/instructions.md` with:

```markdown
# Project Instructions

> Project-specific rules and configurations for the Planning Agent.

## GitHub Configuration

### Copilot Instructions
[Read .github/copilot-instructions.md if exists and summarize key points]

### Custom Prompts Found
[List any .github/prompts/*.md files with their purposes]

### Custom Agents Found
[List any .github/agents/*.md files with their purposes]

## Standards Applied

Based on the detected tech stack, the following standards are active:

- [ ] General (.copilot/standards/general.md)
- [ ] [Language-specific standards based on detection]

## Project-Specific Rules

[Extract from existing code patterns:]
- Code style preferences detected
- Naming conventions observed
- File organization patterns

## Detected Conventions

- **Commit format**: [conventional commits, etc.]
- **Branch naming**: [feature/, bugfix/, etc.]
- **PR requirements**: [if detectable from CI]

---
*Last updated: [TIMESTAMP]*
```

---

## Step 4: Setup Context Directory

### 4.1 Create/Update `.copilot/context/state.yaml`

Fill in ALL fields based on actual project analysis:
- project.name, description, purpose, domain, stage
- architecture.style, patterns
- stack.languages, frameworks, databases
- modules (list actual modules found)
- data_flow.entry_points

### 4.2 Create/Update `.copilot/context/architecture.md`

Document the actual architecture:
- Draw ASCII diagram of the system
- List actual layers/components found
- Document data flow based on code analysis

### 4.3 Create/Update `.copilot/context/codebase-map.md`

Create actual navigation guide:
- Real directory structure (not template)
- Actual entry points with file paths
- Real core modules with descriptions
- Actual configuration files found

### 4.4 Create/Update `.copilot/context/dependencies.md`

List actual dependencies:
- Production dependencies with versions and purposes
- Development dependencies
- Peer dependencies if applicable

---

## Step 5: Setup Testing Directory

### 5.1 Create/Update `.copilot/testing/state.yaml`

Detect and fill in:
- testing_framework.primary (detect from devDependencies or test files)
- structure.unit_tests.location (find actual test directories)
- commands.run_all (from package.json scripts, Cargo.toml, etc.)
- project.run_dev, run_build, run_start (actual commands)

### 5.2 Create/Update `.copilot/testing/strategy.md`

Document actual testing setup:
- Real test locations and patterns
- Actual test commands
- Coverage configuration if found

---

## Step 6: Initialize Decisions Directory

Create `.copilot/decisions/state.yaml` if not exists.

---

## Step 7: Initialize Memory Directory

Create `.copilot/memory/state.yaml` if not exists.

---

## Step 8: Initialize Plans Directory

Create `.copilot/plans/state.yaml` if not exists.

---

## Step 9: Report Summary

After completing all steps, provide a summary:

```
âœ… **Project Context Setup Complete**

**Project**: [name]
**Tech Stack**: [primary language] + [framework]

**Files Created/Updated**:
- .copilot/project_summary.md
- .copilot/instructions.md
- .copilot/context/state.yaml
- .copilot/context/architecture.md
- .copilot/context/codebase-map.md
- .copilot/context/dependencies.md
- .copilot/testing/state.yaml
- .copilot/testing/strategy.md
- .copilot/decisions/state.yaml
- .copilot/memory/state.yaml
- .copilot/plans/state.yaml

**Key Findings**:
- [Notable patterns or conventions]
- [Potential issues or gaps]
- [Recommendations]

The Planning Agent is now fully configured for this project.
```

---

## Important Notes

1. **Use real data** - Do not use placeholder text. Analyze the actual codebase.
2. **Be thorough** - Scan all relevant files, not just root level.
3. **Overwrite existing** - Update all files with fresh analysis.
4. **Detect patterns** - Look for coding conventions in existing code.
5. **Document gaps** - Note missing tests, documentation, etc.
